var e=function(e,t){var a=e.changedTouches[0].pageY,e=e.mark,t=t.getState();t.calendarPageY=a,t.calendarHeight=e.calendar,t.panelHeight=e.panel,t.calendarMax=e.max,t.calendarMin=e.min,t.calendarCurrHeight||(t.calendarCurrHeight=e.calendar),1==e.view&&(t.calendarCurrHeight=e.calendar),2==e.view&&(t.calendarCurrHeight=e.min),3==e.view&&(t.calendarCurrHeight=e.max)},t=function(e,t){var a,n,l,r,s=t.getState(),o=Math.floor(e.changedTouches[0].pageY-s.calendarPageY);if(s.calendarCurrHeight+o>=s.calendarMin&&s.calendarCurrHeight+o<=s.calendarMax+80){if(t.selectComponent("#calendar").setStyle({transition:"unset",height:s.calendarCurrHeight+o+"px"}),a=t.selectComponent(".wx-calendar-panel-month.curr"),s.calendarCurrHeight+o>=s.calendarHeight&&a.setStyle({transition:"unset",height:"calc("+(s.calendarCurrHeight+o)+"px - 200rpx)"}),s.calendarCurrHeight+o<s.calendarHeight&&(n=a.getDataset().trans,e=s.calendarHeight-s.calendarMin,e=Math.floor(n*Math.abs(s.calendarCurrHeight+o-s.calendarHeight)/e),a.setStyle({transition:"unset",transform:"translateY("+-e+"px)"})),s.calendarCurrHeight+o<s.calendarMax-40)for(l=t.selectAllComponents(".wx-calendar-panel-solar-schedules"),r=0;r<l.length;r++)l[r].removeClass("show");s=0<o?1:-1,s=Math.abs(o)<120?s*Math.floor(Math.abs(o)/120*20):20*s,t.selectComponent("#control_1").setStyle({transition:"unset",transform:"rotate("+s+"deg)"}),t.selectComponent("#control_2").setStyle({transition:"unset",transform:"rotate("+-s+"deg)"})}},a=function(e,t){var a,n,l,r,s=t.getState(),o=e.changedTouches[0].pageY,c=Math.floor(o-s.calendarPageY),i=s.calendarCurrHeight+c,o=e.mark.view,c=s.calendarHeight-Math.floor((s.calendarHeight-s.calendarMin)/2),e=s.calendarHeight+Math.floor((s.calendarMax-s.calendarHeight)/2);if(e<i){for(o=3,t.selectComponent("#calendar").setStyle({transition:"all .3s ease 0s",height:s.calendarMax+"px"}),t.selectComponent(".wx-calendar-panel-month.curr").setStyle({transition:"all .3s ease 0s",height:"calc("+s.calendarMax+"px - 200rpx)",transform:"translateY(0)"}),a=t.selectAllComponents(".wx-calendar-panel-month.other"),n=0;n<a.length;n++)a[n].setStyle({transition:"unset",height:"calc("+s.calendarMax+"px - 200rpx)"});for(l=t.selectAllComponents(".wx-calendar-panel-solar-schedules"),n=0;n<l.length;n++)l[n].addClass("show");s.schedule_show=!0}else if(i<=e&&c<i)for(o=1,t.selectComponent("#calendar").setStyle({transition:"all .3s cubic-bezier(0.5, 0, 0.27, 1.5) 0s",height:s.calendarHeight+"px"}),t.selectComponent(".wx-calendar-panel-month.curr").setStyle({transition:"all .3s cubic-bezier(0.5, 0, 0.27, 1.5) 0s",height:s.panelHeight+"px",transform:"translateY(0)"}),a=t.selectAllComponents(".wx-calendar-panel-month.other"),n=0;n<a.length;n++)a[n].setStyle({transition:"unset",height:s.panelHeight+"px",transform:"translateY(0)"});else for(o=2,t.selectComponent("#calendar").setStyle({transition:"all .3s cubic-bezier(0.5, 0, 0.27, 1.5) 0s",height:s.calendarMin+"px"}),(i=t.selectComponent(".wx-calendar-panel-month.curr")).setStyle({transition:"all .3s cubic-bezier(0.5, 0, 0.27, 1.5) 0s",height:s.panelHeight+"px",transform:"translateY("+-i.getDataset().trans+"px)"}),a=t.selectAllComponents(".wx-calendar-panel-month.other"),n=0;n<a.length;n++)r=a[n].getDataset().trans,a[n].setStyle({transition:"unset",height:s.panelHeight+"px",transform:"translateY("+-r+"px)"});t.selectComponent("#control_1").setStyle({transition:"all .3s cubic-bezier(0.6, 0, 0.27, 1.5) .2s",transform:"rotate(0deg)"}),t.selectComponent("#control_2").setStyle({transition:"all .3s cubic-bezier(0.6, 0, 0.27, 1.5) .2s",transform:"rotate(0deg)"}),t.callMethod("toggleView",{state:o})},l=function(e,t,a){var n,l,r,s;if(2==e)for(a.selectComponent("#calendar").setStyle({transition:"all .28s ease 0s",height:t.min+"px"}),(e=a.selectComponent(".wx-calendar-panel-month.curr")).setStyle({transition:"all .28s ease 0s",height:t.panel+"px",transform:"translateY("+-e.getDataset().trans+"px)"}),n=a.selectAllComponents(".wx-calendar-panel-month.other"),l=0;l<n.length;l++)r=n[l].getDataset().trans,n[l].setStyle({transition:"unset",height:t.panel+"px",transform:"translateY("+-r+"px)"});else for(a.selectComponent("#calendar").setStyle({transition:"all .28s ease 0s",height:t.calendar+"px"}),a.selectComponent(".wx-calendar-panel-month.curr").setStyle({transition:"all .28s ease 0s",height:t.panel+"px",transform:"translateY(0)"}),n=a.selectAllComponents(".wx-calendar-panel-month.other"),l=0;l<n.length;l++)n[l].setStyle({transition:"unset",height:t.panel+"px",transform:"translateY(0)"});for(s=a.selectAllComponents(".wx-calendar-panel-solar-schedules"),l=0;l<s.length;l++)s[l].removeClass("show")},n=function(e,t){var a=e.mark,e=2==a.view?1:2;t.callMethod("toggleView",{state:e}),l(e,a,t)},r=function(e,t,a){var n;e&&(n=a.selectComponent("#calendar").getDataset(),l(e="week"==e?2:1,n,a),a.callMethod("toggleView",{state:e}))},s=function(e,t,a){var n,l,r,s;if(0<=e)for(n=a.selectComponent("#calendar").getDataset(),l=a.selectAllComponents(".wx-calendar-panel-month.other"),r=0;r<l.length;r++)s=l[r].getDataset().trans,l[r].setStyle({transition:"unset",height:n.panel+"px",transform:"translateY("+-s+"px)"})},o=function(e,t,a){e&&(e=a.selectComponent("#calendar").getDataset(),(a=a.selectComponent(".wx-calendar-panel-month.curr")).setStyle({transition:"unset",height:e.panel+"px",transform:"translateY("+-a.getDataset().trans+"px)"}))},c=function(e,t,a){var n,l,r,s;if(e)for(n=a.selectComponent("#calendar").getDataset(),l=a.selectAllComponents(".wx-calendar-panel-month"),r=0;r<l.length;r++)s=l[r].getDataset().trans,l[r].setStyle({transition:"unset",height:n.panel+"px",transform:"translateY("+-s+"px)"})},i=function(e,t){var a,n,l=e.mark,e=l.view;if(1==e)t.callMethod("justYearPanelShow");else{for(t.selectComponent("#calendar").setStyle({transition:"all .28s ease 0s",height:l.calendar+"px"}),t.selectComponent(".wx-calendar-panel-month.curr").setStyle({transition:"all .28s ease 0s",height:l.panel+"px",transform:"translateY(0)"}),a=t.selectAllComponents(".wx-calendar-panel-month.other"),n=0;n<a.length;n++)a[n].setStyle({transition:"unset",height:l.panel+"px",transform:"translateY(0)"});t.callMethod("handleYearPanelShow"),t.callMethod("toggleView",{state:1})}};module.exports={touchStart:e,touchMove:t,touchEnd:a,handleWeekSwiperChange:s,handleMonthChange:o,handleInitTrans:c,toggleView:n,handleViewChange:r,handleYearPanelShow:i};